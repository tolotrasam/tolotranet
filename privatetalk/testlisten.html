<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js" > </script> 
<script src="js/listenchat.js" > </script> 
<input type = "button" onclick = "returned()" value = "action"/>
<div id ="container"/>
</div>

<script> 
function refreshdiv(){
        $('#container').load("listen.php");
    }
</script> 

<script type="text/javascript">
var x = 0 //  generated by PHP
var processUpdate = function( response ) 
{
    if ( x < response ) 
    {
        //replace_current_data_with_new_via_ajax();
        x = response;
		alert('newmessage');
		refreshdiv ();
		
    }
}
//  Compare our Page Generate ID against that of the server
var checkUpdates = function()
{
    serverPoll = setInterval( function()
    {
        $.get('listen.php', 
          { lastupdate: 1 }, 
          processUpdate, 'html');
    }, 2000 )
};

//  Check for updates every 10 seconds
$( document ).ready( checkUpdates );

</script>